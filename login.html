<!DOCTYPE html>
<html>    
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Genting | SkyWorlds Theme Park</title>
    <link rel="icon" type="image/x-icon" href="source/icon.png"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
    <script src="https://kit.fontawesome.com/41b72bea59.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/login.css">
    
</head>

<body>
    <div class="container">
        <div class="back"><a href="home.html"><button>Back</button></a></div>
        <div class="form-box">
            <h1 id="title">Sign Up</h1>
            <form id="signup" method="get">
                <div class="input-group">

                    <div class="input-field" id="nameField">
                        <i class="fa-solid fa-user"></i>
                        <input type="text" placeholder="Name" id="uname" required />
                    </div>

                    <div class="input-field">
                        <i class="fa-solid fa-envelope"></i>
                        <input type="email" placeholder="Email" id="uEmail" required />
                    </div>

                    <div class="input-field" >
                        <i class="fa-solid fa-lock"></i>
                        <input type="password" placeholder="Password" id="uPassword" required />
                    </div>
                    <p class="paragraph">Forgot your password? <a href="forget-pass.html">Click Here!</a></p>
                    </div>
                    <div class="btn-field">
                     <button type="button" id="signupBtn">Sign Up</button>
                     <button type="button" id="signinBtn" class="disable">Sign In</button>
                    </div>
                    </br>
                    <div class="btn-confirm1" id="btn-confirm1">
                    <input type="submit" class="confirm" id="signup" value="Sign Up" onclick="store()"/>
                    </div>
                    <div class="btn-confirm2" id="btn-confirm2">
                    <input type="submit" class="confirm" id="signin" value="Sign In" onclick="check()"/>
                    </div>
                    </div>
            </form>
            
        </div>
    </div>

<script>
    let signupBtn = document.getElementById("signupBtn");
    let signinBtn = document.getElementById("signinBtn");
    let nameField = document.getElementById("nameField");
    let title = document.getElementById("title");
    let confirm1 = document.getElementById("btn-confirm1");
    let confirm2 = document.getElementById("btn-confirm2");
    
    signinBtn.onclick = function(){
        nameField.style.maxHeight = "0";
        confirm1.style.display = "none";
        confirm2.style.display = "block";
        title.innerHTML = "Sign In";
        signupBtn.classList.add("disable");
        signinBtn.classList.remove("disable");
        document.getElementById("uname").required = false;
    }

    signupBtn.onclick = function(){
        nameField.style.maxHeight = "65px";
        confirm1.style.display = "block";
        confirm2.style.display = "none";
        title.innerHTML = "Sign Up";
        signinBtn.classList.add("disable");
        signupBtn.classList.remove("disable");
    }

    function store() {
        var name = document.getElementById('uname');
        var email = document.getElementById('uEmail');
        var pw = document.getElementById('uPassword');

        if(name.value.length == 0){
        alert('Please fill your name.');

    }else if(email.value.length == 0){
        alert('Please fill your email.');
        
    }else if(pw.value.length == 0){
        alert('Please fill in password');

    }else if(name.value.length == 0 && pw.value.length == 0){
        alert('Please fill in email and password');

    }else {

        localStorage.setItem('storedName', name.value);
        localStorage.setItem('storedEmail', email.value);
        localStorage.setItem('storedPass', pw.value);
        alert('Your account has been created');
        window.location.reload();
    }
    }

    function check() {
        var autEmail = localStorage.getItem('storedEmail');
        var autPw = localStorage.getItem('storedPass');

        var useremail = document.getElementById('uEmail');
        var userpw = document.getElementById('uPassword');

        if(useremail.value == autEmail && userpw.value == autPw){
        localStorage.setItem('auth',0);
        alert('You are logged in.');
        window.location.href="/home.html";

    }else{
        alert('Error on login');
        window.location.reload();
    }
    }

</script>

</body>
</html>